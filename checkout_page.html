<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Check out</title>

<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display",Arial,sans-serif;
}
body{
  background:#f5f5f7;
}

/* ------------ MAIN TITLE ------- */
.page-main-title{
  text-align: center;
  font-size: 40px;
  font-weight: 500;
  color: #1d1d1f;
  margin-top: 28px;
  margin-bottom: 20px;
}

/* ---------- CHECKOUT LAYOUT ---------- */
.checkout-wrapper{
  max-width:1100px;
  margin: 20px auto 120px;
  padding:30px 20px;
}
.checkout-box{
  background:#fff;
  border-radius:18px;
  padding:28px;
}

/* ---------- CART ITEM ---------- */
.cart-item{
  display:flex;
  justify-content:space-between;
  gap:20px;
  padding-bottom:34px;
}
.cart-left{
  display:flex;
  gap:16px;
}
.cart-left img{
  width:120px;
  height:120px;
  border-radius:12px;
  object-fit:cover;
}
.cart-info{
  margin-top:20px;
}
.cart-name{
  font-size:15px;
  font-weight:500;
}
.cart-qty{
  font-size:13px;
  color:#6e6e73;
  margin-top:12px;
}
/* ---------- RIGHT ---------- */
.cart-right{
  text-align:right;
  margin-top:20px;
}
.price{
  font-size:15px;
  font-weight:500;
}
.remove-btn{
  margin-top:12px;
  font-size:15px;
  color:#0071e3;
  background:none;
  border:none;
  cursor:pointer;
}
.remove-btn:hover{
  text-decoration:underline;
}
.divider{
  height:1px;
  background:#e5e5ea;
  margin:20px 0;
}

/* ---------- SUMMARY ---------- */
.summary-row{
  display:flex;
  justify-content:space-between;
  font-size:17px;
  margin-bottom:10px;
}
.summary-row.total{
  align-items:flex-start;
}
.summary-row.total span:first-child{
  font-size:30px;
  font-weight:500;
}
.total-right{
  text-align:right;
}
.total-price{
  font-size:21px;
  font-weight:600;
}
.total-right small{
  display:block;
  font-size:12px;
  color:#6e6e73;
  margin-top:6px;
}

/* ---------- CHECKOUT BUTTON ---------- */
.checkout-btn{
  margin-top:16px;
  padding:14px 65px;
  border-radius:14px;
  background:#0071e3;
  color:#fff;
  border:none;
  font-size:16px;
  font-weight:500;
  cursor:pointer;
}
.checkout-btn:hover{
  background:#005bb5;
}
/* SEPARATE CARD WRAPPER */
.recommend-card-wrapper{
  margin-top:50px;
  background:#fff;
  border-radius:18px;
  padding:28px;
}
/* TITLE */
.recommend-title{
  font-size:28px;
  font-weight:500;
  margin-bottom:38px;
  display: flex;
  justify-content: center;
  align-items: center;
}
/* GRID */
.recommend-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, 280px);
  gap:24px;
  justify-content:center;
}
/* PRODUCT CARD */
.recommend-card{
  border-radius:16px;
  padding:20px;
  text-align:center;
}
.recommend-card img{
    width: 100%;
    max-width: 210px;
    height: 140px;
    margin-bottom: 16px;
    border-radius: 12px;
    object-fit: contain;
}
.recommend-name{
  font-size:15px;
  font-weight:500;
}
.recommend-price{
  margin-top:8px;
  font-size:14px;
}
/* COLORS */
.recommend-colors{
  margin-top: 8px;
  font-size:13px;
  color:#6e6e73;
  margin-bottom:14px;
}
.color-dots{
  display:flex;
  justify-content:center;
  gap:6px;
  margin-top:6px;
}
.dot{
  width:10px;
  height:10px;
  border-radius:50%;
}
.midnight{background:#1f1f1f;}
.blue{background:#3b6fb6;}
.purple{background:#7d5ba6;}
.starlight{background:#e6d8b5;}
.orange{background:#f26d21;}

/* BUTTON */
.add-bag-btn{
  margin-top:10px;
  padding:10px 18px;
  border-radius:20px;
  border:1px solid #0071e3;
  background:#fff;
  color:#0071e3;
  font-size:13px;
  cursor:pointer;
}
.add-bag-btn:hover{
  background:#0071e3;
  color:#fff;
}
/* SHOW MORE */
.show-more{
  margin-top:24px;
  text-align:center;
  color:#0071e3;
  font-size:14px;
  cursor:pointer;
}

/* ===== CHECKOUT EMPTY STATE ===== */
#emptyCheckout {
  padding: 10px 0;
}
#emptyCheckout h2 {
  font-size: 32px;
  font-weight: 500;
  margin-bottom: 16px;
  color: #1d1d1f;
}
.empty-actions {
  display: flex;
  gap: 14px;
}
.empty-actions .checkout-btn {
  min-width: 220px;        
  padding: 14px 0;         
  text-align: center;
    transition: background-color 0.25s ease, color 0.25s ease;
}
.empty-actions .signin-btn {
  color: #fff;
  border: 1px solid #d2d2d7;
}
/* CONTINUE SHOPPING HOVER */
.empty-actions .checkout-btn:not(.signin-btn):hover {
  background: #005bb5;   
}

/* HELP SECTION */
.help-section {
  font-size: 16px;
  color: #6e6e73;
}
.help-section a {
  color: #0071e3;
  text-decoration: none;
}
.help-section a:hover {
  text-decoration: underline;
}
.new-arrivals-section {
  position: relative;
  width: 100%;
  border-radius: 18px;
  overflow: hidden;
  margin: 60px auto;
}
.new-arrivals-img {
  width: 100%;
  display: block;
}
/* Overlay text */
.new-arrivals-overlay {
  position: absolute;
  top: 50%;
  left: 6%;
  transform: translateY(-50%);
  color: #1d1d1f;
  max-width: 420px;
}
.new-arrivals-overlay h2 {
  font-size: 32px;
  font-weight: 600;
  margin-bottom: 8px;
}
.new-arrivals-overlay p {
  font-size: 17px;
  color: #6e6e73;
  margin-bottom: 18px;
}
/* Button */
.shop-btn {
  background: #0071e3;
  color: #fff;
  border: none;
  padding: 10px 42px;
  font-size: 15px;
  border-radius: 22px;
  cursor: pointer;
}
.shop-btn:hover {
  background: #0077ed;
}

/* ===== ORDER SUCCESS POPUP ===== */
.order-popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.popup-card {
  background: #fff;
  padding: 40px 50px;
  border-radius: 18px;
  text-align: center;
  box-shadow: 0 20px 50px rgba(0,0,0,0.25);
  animation: popupScale 0.35s ease;
}
.check-circle {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  background: #28a745;
  color: #fff;
  font-size: 46px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 18px;
  border: 6px solid #ffffff;
  transition: transform 0.25s ease;
}
.popup-card:hover .check-circle {
  transform: scale(1.1);
}
.popup-text {
  font-size: 20px;
  font-weight: 600;
  color: #1d1d1f;
}

/* animation */
@keyframes popupScale {
  from {
    transform: scale(0.85);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

</style>
</head>

<body>

<!--------- Mian tittle ---------->

<h1 class="page-main-title" id="checkoutTitle">Check out</h1>

<!------------------------------------ ITEMS SECTION ------------------------->
<div class="checkout-wrapper">

<div class="checkout-box" id="checkoutBox">

<div id="checkoutContent">
<div id="cartItems">

<!-- TEMPLATE -->
<div class="cart-item" data-template="true" style="display:none;">
  <div class="cart-left">
    <img>
    <div class="cart-info">
      <div class="cart-name"></div>
      <div class="cart-qty"></div>
    </div>
  </div>

  <div class="cart-right">
    <div class="price"></div>
    <button class="remove-btn">Remove</button>
  </div>
</div>

</div>

<div class="divider"></div>

<div class="summary-row">
  <span>Bag subtotal</span>
  <span id="subtotal"></span>
</div>

<div class="summary-row">
  <span>Shipping</span>
  <span>Free</span>
</div>

<div class="divider"></div>

<div class="summary-row total">
  <div>
    <span>Total</span><br>
    <span style="font-size:13px;color:#6e6e73;">Monthly payment</span>
  </div>

  <div class="total-right">
    <div class="total-price" id="totalPrice"></div>
    <small id="emiText"></small>
    <button class="checkout-btn" id="checkoutBtn">Place Order</button>
  </div>
</div>

</div>

<div id="emptyCheckout" style="display:none;">
      <h2>Your bag is empty</h2>

      <div class="empty-actions">
           <button class="checkout-btn signin-btn">Sign in</button>
           <button class="checkout-btn" onclick="location.href='index.html'">Continue shopping</button>
        </div>
    </div>

</div>

<!------------------------------------ YOU MAY ALSO LIKE SECTION ------------------------->
<div class="recommend-card-wrapper">

  <div class="recommend-title">You may also like</div>

  <div class="recommend-grid">

    <div class="recommend-card">
      <img src="https://i.pinimg.com/1200x/ad/77/92/ad7792d09496376cf1a9e1a595c0bea9.jpg">
      <div class="recommend-name">Watch nike - MidGray</div>
      <div class="recommend-price">MRP ₹20,000</div>

      <div class="recommend-colors">
        Colour - Midnight
        <div class="color-dots">
          <span class="dot midnight"></span>
          <span class="dot blue"></span>
          <span class="dot purple"></span>
          <span class="dot starlight"></span>
          <span class="dot orange"></span>
        </div>
      </div>

      <button class="add-bag-btn">ADD TO BAG</button>
    </div>

    <div class="recommend-card">
      <img src="https://i.pinimg.com/1200x/8c/3b/3b/8c3b3b9648dd3eef76ad246fd5f4055a.jpg">
      <div class="recommend-name">iPhone case - Red</div>
      <div class="recommend-price">MRP ₹900</div>

      <div class="recommend-colors">
        Colour - Blue
        <div class="color-dots">
          <span class="dot blue"></span>
          <span class="dot midnight"></span>
          <span class="dot purple"></span>
        </div>
      </div>

      <button class="add-bag-btn">ADD TO BAG</button>
    </div>

    <div class="recommend-card">
      <img src="https://i.pinimg.com/1200x/cf/32/02/cf3202d1fc4f5155bec7bef6ba24ad57.jpg">
      <div class="recommend-name">AirPods Max - Blue</div>
      <div class="recommend-price">MRP ₹6,000</div>

      <div class="recommend-colors">
        Colour - Purple
        <div class="color-dots">
          <span class="dot purple"></span>
          <span class="dot midnight"></span>
          <span class="dot blue"></span>
        </div>
      </div>

      <button class="add-bag-btn">ADD TO BAG</button>
    </div>

  </div>

  <div class="show-more">Show more products</div>

</div>

  <div class="divider"></div>

<!----------------------------- HELP DESK -------------------------------------->

        <div class="help-section">
         Need some help?
         <a href="#" target="_blank">Chat now</a>
         (opens in new window) or call 123456789
      </div>

    <div class="divider"></div>

<!----------------------------- NEW ARRIVAL CARD -------------------------------------->

    <div class="new-arrivals-section">
      <img src="https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/apple-new-arrivals-checkout-201804?wid=1960&hei=800&fmt=jpeg&qlt=90&.v=S2tqbzFKVDV3cU41VmE4cmVhMFR3Q2VTTG8vVktWa3R2WDdTWnFFYW5mMXhxSTg3Rm1BVXFoQ09LQXdSRnpmWEh5ZXlPUU12MzRXUTJwc2syRERpNDNBbmlDazNQSGxaUVk2cHNZMFR3ZUdpaG5aazRiM3gzMTlYRmNEYWdwdGU" alt="New Arrivals" class="new-arrivals-img">

  <div class="new-arrivals-overlay">
          <h2>New Arrivals</h2>
          <p>Check out the latest accessories.</p>
          <button class="shop-btn">Shop</button>
       </div>
    </div>

 </div>

<div class="order-popup" id="orderPopup">
  <div class="popup-card">
    <div class="check-circle">
      ✓
    </div>
    <div class="popup-text">
      Thanks for your purchase!
    </div>
  </div>
</div>

<script>
/* ---------- GET BAG ---------- */
function getBag(){
  return JSON.parse(localStorage.getItem("appleBag")) || [];
}

/* ---------- SAVE BAG ---------- */
function saveBag(bag){
  localStorage.setItem("appleBag", JSON.stringify(bag));
}

/* ---------- ADD TO BAG (FROM RECOMMEND SECTION) ---------- */
function addToBag(item){
  const bag = getBag();

  const existingIndex = bag.findIndex(
    p => p.name === item.name
  );

  if(existingIndex > -1){
    bag[existingIndex].qty += 1;
  } else {
    bag.push({
      name: item.name,
      price: item.price,
      image: item.image,
      qty: 1
    });
  }

  saveBag(bag);
  renderCheckout();
}

/* ---------- RENDER CHECKOUT ---------- */
function renderCheckout(){
  const bag = getBag();
  const checkoutTitle = document.getElementById("checkoutTitle");
  const checkoutContent = document.getElementById("checkoutContent");
  const emptyCheckout = document.getElementById("emptyCheckout");
  const cartItems = document.getElementById("cartItems");
  const template = cartItems.querySelector('[data-template="true"]');

  /* ----- NO ITEMS ----- */
  if(!bag.length){
    checkoutContent.style.display = "none";
    emptyCheckout.style.display = "block";
    if (checkoutTitle) checkoutTitle.style.display = "none";
    return;
  }

  /* ----- ITEMS EXIST ----- */
  if (checkoutTitle) checkoutTitle.style.display = "block";
  checkoutContent.style.display = "block";
  emptyCheckout.style.display = "none";

  cartItems.querySelectorAll(".cart-item.clone").forEach(el => el.remove());

  let subtotal = 0;

  bag.forEach((item,index)=>{
    subtotal += item.price * item.qty;

    const clone = template.cloneNode(true);
    clone.classList.add("clone");
    clone.style.display = "flex";

    clone.querySelector("img").src = item.image;
    clone.querySelector(".cart-name").innerText = item.name;
    clone.querySelector(".cart-qty").innerText = `× ${item.qty}`;
    clone.querySelector(".price").innerText =
      `₹${(item.price * item.qty).toLocaleString("en-IN")}`;

    clone.querySelector(".remove-btn").onclick = () => {
      removeItem(index);
    };

    cartItems.appendChild(clone);
  });

  document.getElementById("subtotal").innerText =
    `₹${subtotal.toLocaleString("en-IN")}`;

  document.getElementById("totalPrice").innerText =
    `₹${subtotal.toLocaleString("en-IN")}`;

  document.getElementById("emiText").innerText =
    `₹${Math.round(subtotal/24).toLocaleString("en-IN")}/mo with EMI`;
}

/* ---------- REMOVE ITEM ---------- */
function removeItem(index){
  const bag = getBag();
  bag.splice(index,1);
  saveBag(bag);
  renderCheckout();
}

/* ---------- CHECKOUT BUTTON ---------- */
document.getElementById("checkoutBtn")?.addEventListener("click",()=>{
  const bag = getBag();
  if(!bag.length){
    alert("Your bag is empty");
    return;
  }

  const popup = document.getElementById("orderPopup");

  if (popup) {
    popup.style.display = "flex";
    setTimeout(() => {
      popup.style.display = "none";
    }, 4000);
  }

  localStorage.removeItem("appleBag");
  renderCheckout();
});

/* ---------- ENABLE ADD TO BAG BUTTONS ---------- */
document.querySelectorAll(".add-bag-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const card = btn.closest(".recommend-card");

    const priceText = card.querySelector(".recommend-price").innerText;
    const price = Number(priceText.replace(/[^\d]/g, ""));

    const item = {
      name: card.querySelector(".recommend-name").innerText,
      price: price,
      image: card.querySelector("img").src
    };

    addToBag(item);
  });
});

/* ---------- INITIAL LOAD ---------- */
renderCheckout();
</script>

</body>
</html>
